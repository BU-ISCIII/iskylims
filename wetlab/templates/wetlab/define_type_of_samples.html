{% extends "core/base.html" %}
{% load static %}
{% block content %}
{% include "wetlab/menu.html" %}
{% include "core/cdn_table_functionality.html" %}
<section class="iskylims d-flex flex-column fill-height">
    <div class="container-md">
        {% include 'registration/login_inline.html' %}
        {% if sample_types.ERROR %}
            <div class="row my-2">
                <div class="col-sm-6 offset-2" >
                    <div class="card border-danger mb-3">
                        <div class="card-header text-danger"><h3>Unable to record your Sample Type</h3> </div>
                        <div class="card-body">
                            <p>
                                {{ sample_types.ERROR.0 }}
                            </p>
                        </div>  
                    </div>
                </div> <!--// end of sm-6 -->
            </div> <!--// end row -->
        {% endif %}
        
        {% if sample_types.new_defined_sample_type %}
            <div class="container">
                <div class="row my-2">
                    <div class="col-sm-6 offset-3" >
                        <div class="card ">
                            <div class="card-header"><h3 class="text-center">New sample type has been added</h3> </div>
                            <div class="card-body">
                                <p>Sample type :</p> 
                                <p>{{ sample_types.new_defined_sample_type }} has been recorded</p>
                                <button type="button" class="btn btn-outline-secondary float-end" onclick="window.location.href = '/wetlab/defineTypeOfSamples';">Define new type of sample</button>
                            </div>  
                        </div>
                    </div> 
                </div>
            </div>
        {% else %}
            <div class="container">
                <div class="row my-2">
                    <div class="col d-flex align-items-stretch" >
                        <div class="card mb-2">
                            <div class="card-header"><h3>Define a new type of sample</h3> </div>
                            <div class="card-body">
                                <form method="post" enctype="multipart/form-data" name="addNewSampleType" id="addNewSampleType">
                                    {% csrf_token %}
                                    <input type="hidden" name="action" value="addNewSampleType"/>
                                    <div class="form-floating mb-3">
                                        <input class="form-control" required = "required" type="text"  name="sampleTypeName" id="sampleTypeName" placeholder="Type of sample">
                                        <label class="text-danger" for="sampleTypeName">Type of sample</label>
                                    </div>
                                    <p class="mt-2"> Check the Mandatory Fields required when recording a new sample</p>
                                    <div class="form-control">
                                        {% for values  in sample_types.optional_values  %}
                                            <div class="form-check form-switch col mb-2">
                                                <label class="form-check-label  form-label" for="{{values}}">{{values}}</label>
                                                <input class="form-check-input" type="checkbox" name="{{values}}" id="{{values}}" >
                                            </div>
                                        {% endfor %}
                                    </div>
                                    <p class="mt-2"> Fields marked in <FONT COLOR="Red">Red</FONT> are mandatory</p>
                                    <input class="btn float-end btn-outline-primary mb-2 me-2" type="submit" value="Submit" id="btnSubmit">
                                </form>
                            </div>
                        </div>
                    </div>
                    {% if sample_types.defined_sample_types %}
                        <div class="col d-flex align-items-stretch" >
                        <div class="card mb-2">
                            <div class="card-header"><h3>Type of Samples already defined</h3></div>
                            <div class="card-body">
                                <table id="s_table" class="table table-striped table-bordered">
                                    <thead>
                                        <tr>
                                            <th>Type of Sample</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for  id, name in sample_types.defined_sample_types %}
                                            <tr>
                                                <td><a href="/wetlab/displayTypeOfSample={{id}}" class="text-decoration-none">{{name}}</a></td>
                                            </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>  
                        </div>
                        <script type="text/javascript">
                            $(document).ready(function() {
                                $('#s_table').DataTable({
                                    dom: 'frtip',
                                    responsive: true,
                                });
                            });
                        </script>
                    {% endif %}
                </div> <!--// end col-sm-8  -->
            </div> <!--// end row -->
                
        {% endif %}
    </div>
</section>
{% endblock %}
